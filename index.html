<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GENJUTSU CHEAT UID BYPASS</title>
<style>
/* ‚Äî‚Äî‚Äî SAME FULL CSS ‚Äî‚Äî‚Äî */
body { font-family: 'Segoe UI', Arial, sans-serif; margin:0; padding:20px; background: radial-gradient(circle at top left, #1a0000, #000); color:#fff; }
h2 { text-align:center; font-size:2.5em; color:#ff4c4c; text-shadow:0 0 10px #ff1a1a,0 0 25px #ff4c4c; margin-bottom:20px; }
.container { max-width:900px; margin:auto; }
#apiKeyInput { width:100%; padding:12px; margin-bottom:10px; border-radius:12px; border:none; background: rgba(255,255,255,0.05); color:#fff; font-size:1em; text-align:center; box-shadow:0 0 10px rgba(255,76,76,0.5);}
#saveApiKey { width:100%; padding:12px; border-radius:12px; border:none; background: rgba(255,76,76,0.5); color:#fff; font-weight:bold; margin-bottom:15px; cursor:pointer; }
#saveApiKey:hover { background: rgba(255,76,76,0.8); box-shadow:0 0 20px #ff4c4c; transform: scale(1.03); }
#uidInputWrapper { display:flex; flex-wrap:wrap; gap:10px; margin-bottom:15px; }
#newUid { flex:1; min-width:150px; padding:14px; border-radius:15px; border:none; background: rgba(255,255,255,0.05); color:#fff; font-size:1em; box-shadow:0 0 10px rgba(255,76,76,0.5); }
#expirySelect { flex:1; min-width:150px; padding:14px; border-radius:15px; border:none; font-size:1em; cursor:pointer; box-shadow:0 0 10px rgba(255,76,76,0.5); background: rgba(0,0,0,0.2); color:#fff; }
#expirySelect option { color:#000; }
#addUidBtn, #deleteAllBtn, #deleteExpiredBtn { padding:14px 20px; border-radius:15px; border:none; background: rgba(255,76,76,0.5); color:#fff; font-weight:bold; cursor:pointer; transition:0.3s; }
#addUidBtn:hover, #deleteAllBtn:hover, #deleteExpiredBtn:hover { background: rgba(255,76,76,0.8); box-shadow:0 0 20px #ff4c4c; transform: scale(1.05); }
#searchInput { width: 200px; padding:10px; margin-right:10px; border-radius:12px; border:none; background: rgba(255,255,255,0.05); color:#fff; box-shadow:0 0 10px rgba(255,76,76,0.5);}
#sortSelect { padding:10px; border-radius:12px; border:none; background: rgba(0,0,0,0.2); color:#fff; cursor:pointer; box-shadow:0 0 10px rgba(255,76,76,0.5);}
#uidList { margin-top:20px; }
.uid-card { background: rgba(255,255,255,0.05); backdrop-filter:blur(15px); border-left:5px solid #ff4c4c; padding:15px; margin:12px 0; border-radius:15px; display:flex; justify-content:space-between; align-items:center; box-shadow:0 0 15px rgba(255,76,76,0.5); transition:0.3s;}
.uid-card.expired { border-left-color: #ff0000; background: rgba(255,0,0,0.05); }
.uid-info span { font-weight:bold; text-shadow:0 0 5px #ff1a1a; word-break:break-all; }
.card-buttons { display:flex; gap:8px; flex-shrink:0; }
.card-buttons button { border-radius:10px; border:none; padding:6px 12px; cursor:pointer; transition:0.3s; font-size:0.9em; }
.card-buttons button:hover { background: rgba(255,76,76,0.8); box-shadow:0 0 10px #ff4c4c; }
.stats { margin-top:20px; padding:15px; background: rgba(255,255,255,0.05); border-radius:15px; box-shadow:0 0 15px rgba(255,76,76,0.5); }
.stats span { display:block; font-weight:bold; margin-bottom:5px; }
.modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); justify-content:center; align-items:center; z-index:1000; }
.modal-content { background:rgba(30,0,0,0.9); padding:20px; border-radius:15px; width:300px; text-align:center; }
.modal-content input, .modal-content select { width:100%; padding:10px; margin:10px 0; border-radius:10px; border:none; background: rgba(255,255,255,0.05); color:#fff; }
.modal-content button { padding:10px 15px; border:none; border-radius:10px; cursor:pointer; margin-top:10px; background: rgba(255,76,76,0.5); color:#fff; font-weight:bold; }
.modal-content button:hover { background: rgba(255,76,76,0.8); box-shadow:0 0 10px #ff4c4c; }
@media(max-width:600px){ #uidInputWrapper { flex-direction:column; } #addUidBtn { width:100%; } #searchInput{ width:100%; margin-bottom:10px; } }
</style>
</head>
<body>

<h2>üåå GENJUTSU CHEAT UID BYPASS üåå</h2>

<div class="container">

<input id="apiKeyInput" placeholder="Enter Admin Key">
<button id="saveApiKey">üíæ Save Admin Key</button>

<div style="display:flex; gap:10px; flex-wrap:wrap; margin-bottom:15px;">
  <input id="searchInput" placeholder="Search UID">
  <select id="sortSelect">
    <option value="uidAsc">UID A-Z</option>
    <option value="uidDesc">UID Z-A</option>
    <option value="expAsc">Expiry Soon</option>
    <option value="expDesc">Expiry Far</option>
  </select>
</div>

<div id="uidInputWrapper">
  <input id="newUid" placeholder="Enter UID">
  <select id="expirySelect">
    <option value="1">1 Day</option>
    <option value="7">7 Days</option>
    <option value="30">1 Month</option>
    <option value="1460">Lifetime</option>
  </select>
  <button id="addUidBtn">Add UID</button>
</div>

<div style="display:flex; gap:10px; margin-bottom:10px;">
  <button id="deleteAllBtn">Delete All</button>
  <button id="deleteExpiredBtn">Delete Expired</button>
</div>

<div class="stats" id="statsSection">
  <span>Total Users: 0</span>
  <span>Active Users: 0</span>
  <span>Expired Users: 0</span>
</div>

<div id="uidList"></div>
</div>

<!-- Edit Modal -->
<div class="modal" id="editModal">
  <div class="modal-content">
    <h3>Edit UID</h3>
    <input type="text" id="editUidInput" placeholder="UID">
    <input type="date" id="editExpiryInput">
    <button id="saveEditBtn">Save</button>
    <button onclick="closeModal()">Cancel</button>
  </div>
</div>

<script>
const WORKER_URL="https://uidbypass.arafatxvalorent.workers.dev/";
let API_KEY = localStorage.getItem("apiKey") || "";
document.getElementById("apiKeyInput").value = API_KEY;

document.getElementById("saveApiKey").addEventListener("click", () => {
  const key = document.getElementById("apiKeyInput").value.trim();
  if(!key) return alert("Enter API Key");
  API_KEY = key;
  localStorage.setItem("apiKey", API_KEY);
  alert("API Key Saved!");
});

let uidData = [];
let editUID = null;

// Load UIDs (ALERT REMOVED)
async function loadUids(){
  if(!API_KEY) return alert("Enter API Key to load UIDs");
  try{
    const res = await fetch(WORKER_URL, {method:"GET"});
    const data = await res.json();
    uidData = data.uids.map(u => ({ uid: u, expiry: data.expiry && data.expiry[u] ? data.expiry[u] : "" }));

    // Auto-delete only ‚Äî NO ALERT NOW
    const today = new Date();
    for(const u of [...uidData]){
      if(u.expiry && new Date(u.expiry) < today){
        await deleteUid(u.uid);
      }
    }

    render();
    updateStats();
  }catch(err){ console.error(err); }
}

// Render
function render(){
  let filtered = [...uidData];
  const searchVal = document.getElementById("searchInput").value.trim().toLowerCase();
  if(searchVal) filtered = filtered.filter(u => u.uid.toLowerCase().includes(searchVal));

  // Sorting
  const sortVal = document.getElementById("sortSelect").value;
  if(sortVal==="uidAsc") filtered.sort((a,b)=>a.uid.localeCompare(b.uid));
  if(sortVal==="uidDesc") filtered.sort((a,b)=>b.uid.localeCompare(a.uid));
  if(sortVal==="expAsc") filtered.sort((a,b)=>new Date(a.expiry)-new Date(b.expiry));
  if(sortVal==="expDesc") filtered.sort((a,b)=>new Date(b.expiry)-new Date(a.expiry));

  const container = document.getElementById("uidList");
  container.innerHTML = "";
  const today = new Date();

  filtered.forEach(u=>{
    const div = document.createElement("div");
    div.className = "uid-card";
    if(u.expiry && new Date(u.expiry)<today) div.classList.add("expired");

    div.innerHTML = `
      <div class="uid-info">
        <span>UID: ${u.uid}</span><br>
        <span>Expiry: ${u.expiry || "N/A"}</span>
      </div>
      <div class="card-buttons">
        <button onclick="openEditModal('${u.uid}')">‚úèÔ∏è Edit</button>
        <button onclick="deleteUid('${u.uid}')">üóëÔ∏è Delete</button>
      </div>`;
    container.appendChild(div);
  });
}

// Modal
function openEditModal(uid){
  editUID = uid;
  const user = uidData.find(x=>x.uid===uid);
  document.getElementById("editUidInput").value = user.uid;
  document.getElementById("editExpiryInput").value = user.expiry;
  document.getElementById("editModal").style.display = "flex";
}
function closeModal(){ document.getElementById("editModal").style.display = "none"; editUID=null; }

// Save Edit
document.getElementById("saveEditBtn").addEventListener("click", async ()=>{
  if(!editUID) return;
  const newUid = document.getElementById("editUidInput").value.trim();
  const newExpiry = document.getElementById("editExpiryInput").value;
  if(!newUid) return alert("UID cannot be empty");

  await deleteUid(editUID);

  uidData.push({uid:newUid, expiry:newExpiry});
  await fetch(WORKER_URL,{
    method:"POST",
    headers:{"Content-Type":"application/json","X-API-Key":API_KEY},
    body: JSON.stringify({uid:newUid, expiry:newExpiry})
  });
  closeModal();
  render();
  updateStats();
});

// Add UID
document.getElementById("addUidBtn").addEventListener("click", async ()=>{
  if(!API_KEY) return alert("Enter API Key first");
  const uid = document.getElementById("newUid").value.trim();
  const days = parseInt(document.getElementById("expirySelect").value);
  if(!uid) return alert("Enter UID");

  const expiryDate = new Date();
  expiryDate.setDate(expiryDate.getDate() + days);
  const expiryStr = expiryDate.toISOString().split('T')[0];

  if(uidData.some(x=>x.uid===uid)) return alert("Already Added");

  uidData.push({uid, expiry:expiryStr});
  await fetch(WORKER_URL,{
    method:"POST",
    headers:{"Content-Type":"application/json","X-API-Key":API_KEY},
    body: JSON.stringify({uid, expiry:expiryStr})
  });

  document.getElementById("newUid").value="";
  render();
  updateStats();
});

async function deleteUid(uid){
  uidData = uidData.filter(x=>x.uid!==uid);
  await fetch(WORKER_URL,{
    method:"POST",
    headers:{"Content-Type":"application/json","X-API-Key":API_KEY},
    body:JSON.stringify({uid, action:"delete"})
  });
  render();
  updateStats();
}

document.getElementById("deleteAllBtn").addEventListener("click", ()=>{
  if(confirm("Delete ALL UIDs?")) uidData.forEach(u=>deleteUid(u.uid));
});

document.getElementById("deleteExpiredBtn").addEventListener("click", ()=>{
  if(confirm("Delete EXPIRED UIDs?")){
    const today = new Date();
    uidData.forEach(u=>{ if(u.expiry && new Date(u.expiry)<today) deleteUid(u.uid); });
  }
});

document.getElementById("searchInput").addEventListener("input", render);
document.getElementById("sortSelect").addEventListener("change", render);

function updateStats(){
  const total = uidData.length;
  const today = new Date();
  const expired = uidData.filter(u=>u.expiry && new Date(u.expiry)<today).length;
  const active = total - expired;
  document.getElementById("statsSection").innerHTML =
    `<span>Total Users: ${total}</span>
     <span>Active Users: ${active}</span>
     <span>Expired Users: ${expired}</span>`;
}

setInterval(loadUids, 2*60*60*1000);
if(API_KEY) loadUids();
</script>
</body>
</html>
